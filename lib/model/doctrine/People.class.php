<?php

/**
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class People extends BasePeople
{
  public static function getTypes()
  {
    return array(
      1 => 'Contact',
      2 => 'Author',
      4 => 'Identifier',
      8 => 'Expert',
      16 => 'Collector',
      32 => 'Preparator',
      64 => 'Photographer'
    );
  }

  public function __toString()
  {
        return $this->getFormatedName();
  }

  public function getDbPeopleType()
  {
    $result = array();
    foreach(self::getTypes() as $k => $value)
    {
      if($k & $this->_get('db_people_type'))
      {
	$result[] = $k;
      }
    }
    return $result;
  }

  public function setDbPeopleType($db_types)
  {
//     var_dump($type);
//     exit;
    $result = 0;
    $types = self::getTypes();
    foreach($db_types as $value)
    {
      if(isset($types[$value]))
	$result += $value;
    }
    $this->_set('db_people_type',$result);
  }

  public function setBirthDate($fd)
  {
     if(is_string($fd))
     {
	$this->_set('birth_date',$fd);
     }
     else
     {
      $this->_set('birth_date', $fd->format('Y/m/d H:i:s') );
      $this->_set('birth_date_mask', $fd->getMask() );
     }
     return $this;
  }


  public function setEndDate($fd)
  {
     if(is_string($fd))
     {
	$this->_set('end_date',$fd);
     }
     else
     {
      $this->_set('end_date', $fd->format('Y/m/d H:i:s') );
      $this->_set('end_date_mask', $fd->getMask() );
     }
     return $this;
  }
  
 
  public function getBirthDateMasked($tag='em')
  {
    $dateTime = new FuzzyDateTime($this->_get('birth_date'), $this->_get('birth_date_mask'),true);
    return $dateTime->getDateMasked($tag);
  }
 
  
  public function getEndDateMasked($tag='em')
  {
    $dateTime = new FuzzyDateTime($this->_get('end_date'), $this->_get('end_date_mask'),false);
    return $dateTime->getDateMasked($tag);
  }


  public function getBirthDate()
  {

    $date = new FuzzyDateTime($this->_get('birth_date'),$this->_get('birth_date_mask'),true);
    return $date->getDateTimeMaskedAsArray();
  }

  
  public function getEndDate()
  {
    $date = new FuzzyDateTime($this->_get('end_date'),$this->_get('end_date_mask'),false);
    return $date->getDateTimeMaskedAsArray();
  }
}